# Perksu .env example - copy to .env and fill values

# Database
DATABASE_URL=postgresql://perksu:perksu_secret_2024@localhost:6432/perksu

# App
SECRET_KEY=change_me
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=60

# Frontend
FRONTEND_URL=http://localhost:5173

# SMTP (optional - for sending vouchers/receipts)
SMTP_EMAIL=
SMTP_PASSWORD=
SMTP_HOST=smtp.gmail.com
SMTP_PORT=465

# Aggregator (Tango Card integration)
# Set AGGREGATOR_PROVIDER to 'tangocard' to enable the TangoCard client
AGGREGATOR_PROVIDER=mock
TANGO_API_BASE=https://api.tangocard.com
# Get your Tango Card API key and account identifier from Tango Card dashboard
TANGO_API_KEY=
TANGO_ACCOUNT_ID=

# Optional: other settings
# CORS_ORIGINS=http://localhost:5173
# ===========================================
# PERKSU - Environment Configuration
# ===========================================
# This file defines all configurable settings for the Perksu application.
# Copy to .env and modify as needed. Do NOT commit .env to version control.

# Project identifier (used for Docker network/container naming)
PROJECT_NAME=perksu

# ===========================================
# PORT ALLOCATION SCHEME
# ===========================================
# To avoid conflicts with other projects, Perksu uses ports in the 6xxx range:
#   - Database: 6432 (internal 5432)
#   - Backend:  6100 (internal 8000)
#   - Frontend: 7173 (internal 5173)
#
# Other projects should use different ranges:
#   - Project A: 6xxx (Perksu)
#   - Project B: 7xxx
#   - Project C: 9xxx
#   - etc.

# Database Configuration
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_EXTERNAL_PORT=6432
POSTGRES_USER=perksu
POSTGRES_PASSWORD=perksu_secret_2024
POSTGRES_DB=perksu

# Backend Configuration
BACKEND_HOST=0.0.0.0
BACKEND_PORT=8000
BACKEND_EXTERNAL_PORT=6100

# Frontend Configuration  
FRONTEND_PORT=5173
FRONTEND_EXTERNAL_PORT=7173

# JWT Configuration
SECRET_KEY=perksu-super-secret-key-change-in-production-$(openssl rand -hex 32)
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=60

# CORS Configuration (comma-separated origins)
CORS_ORIGINS=http://localhost:7173,http://127.0.0.1:7173

# ===========================================
# DERIVED URLS (auto-computed from above)
# ===========================================
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}
VITE_API_URL=http://localhost:${BACKEND_EXTERNAL_PORT}

# ===========================================
# Redis / Celery (background worker)
# ===========================================
# Expose Redis externally if you want to connect from host: ${REDIS_EXTERNAL_PORT}
REDIS_EXTERNAL_PORT=6379
# Celery broker/backend (use the internal docker hostname 'redis' when running in compose)
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/0

# Note: the backend exposes a simple HTTP health endpoint at /health
# The worker is a Celery process; you can verify the API is up via:
#   curl http://localhost:${BACKEND_EXTERNAL_PORT}/health
# And view worker logs with:
#   docker-compose logs -f worker
